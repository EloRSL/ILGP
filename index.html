<!DOCTYPE html>
<html lang="sl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="robots" content="noindex, nofollow">
    <title>Za Gajo ‚ô°</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lato:wght@300;400&display=swap" rel="stylesheet">
    <style>
        /* --- DEFINICIJA SPREMENLJIVK IN OSNOV --- */
        :root {
            --primary: #ff6b9d; /* Glavna roza barva */
            --accent: #7e22ce;  /* Poudarek vijoliƒçne */
            --glass: rgba(255, 255, 255, 0.15); /* Uƒçinek motnega stekla */
            --glass-border: rgba(255, 255, 255, 0.3);
            --text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            --bg-gradient: linear-gradient(135deg, #1a1a2e 0%, #2a1b3d 25%, #4a1942 50%, #8e2a5b 75%, #d63a77 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Lato', sans-serif;
            background: var(--bg-gradient);
            background-size: 400% 400%;
            animation: gradientBG 25s ease infinite;
            min-height: 100vh;
            color: white;
            overflow-x: hidden; 
            position: relative;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- OVOJNICA (INTRO SCREEN) --- */
        #intro-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #1a1a2e; 
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            transition: opacity 1s ease, visibility 1s ease;
        }

        .envelope-container {
            cursor: pointer;
            transition: transform 0.3s ease;
            position: relative;
        }

        .envelope-container:hover {
            transform: scale(1.02); 
        }

        .envelope {
            position: relative;
            width: 300px;
            height: 200px;
            background: #e0e0e0;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: flex-end;
        }

        .envelope::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            border-left: 150px solid transparent;
            border-right: 150px solid transparent;
            border-top: 110px solid #f8f8f8;
            transform-origin: top;
            transition: transform 2s cubic-bezier(0.4, 0, 0.2, 1) 0s, z-index 0.1s 0.5s;
            z-index: 20;
        }

        .envelope::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
            border-left: 150px solid #ececec;
            border-right: 150px solid #ececec;
            border-bottom: 100px solid #d0d0d0;
            border-top: 100px solid transparent;
            border-radius: 0 0 10px 10px;
            z-index: 10;
            pointer-events: none;
        }

        .letter {
            position: absolute;
            width: 280px;
            height: 170px; 
            background: #fffaf0; 
            bottom: 0;
            left: 10px;
            transition: transform 5s ease-in-out, box-shadow 4s ease;
            z-index: 5;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
            color: #333;
            border: 1px solid #eee;
            padding: 15px;
        }

        .letter h2 { 
            font-family: 'Dancing Script', cursive; 
            font-size: 2.2em; 
            color: var(--primary); 
            margin-bottom: 5px; 
        }

        .envelope-container.open .envelope::before {
            transform: rotateX(180deg);
            z-index: 1;
        }

        .envelope-container.open .letter {
            transform: translateY(-120px);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.8), 0 0 40px rgba(255, 107, 157, 0.4);
            z-index: 5;
        }

        .envelope-container.open .letter::after {
            content: 'üíñ';
            position: absolute;
            top: -20px;
            right: -10px;
            font-size: 24px;
            animation: floatingHeart 3s infinite ease-in-out;
            opacity: 0;
            animation-delay: 2s;
        }

        .envelope-container.open .letter::before {
            content: '‚ú®';
            position: absolute;
            top: auto;
            bottom: 50px;
            left: 20px;
            font-size: 24px;
            animation: floatingSparkle 4s infinite ease-in-out;
            opacity: 0;
            animation-delay: 0.5s;
        }
        .envelope-container.open {
            animation: heart-pulse 1.5s infinite ease-in-out; 
            transform: scale(1.02);
        }
        @keyframes floatingHeart {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateY(-60px) rotate(20deg); opacity: 0; }
        }

        @keyframes floatingSparkle {
            0% { transform: translateY(0) scale(0.8) rotate(0deg); opacity: 0.2; }
            50% { transform: translateY(-30px) scale(1.2) rotate(180deg); opacity: 1; }
            100% { transform: translateY(-60px) scale(0.8) rotate(360deg); opacity: 0; }
        }
        @keyframes heart-pulse {
            0% { transform: scale(1.02); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1.02); }
        }
                
        /* --- OSTALI STILI --- */
        .tap-hint { margin-top: 60px; color: rgba(255,255,255,0.7); font-size: 1em; letter-spacing: 1px; animation: pulse 2s infinite; }
        .main-content { opacity: 0; transition: opacity 1.5s ease; display: none; }
        .container { max-width: 900px; margin: 0 auto; padding: 20px 15px 60px; position: relative; z-index: 2; }
        header { text-align: center; padding: 70px 0 50px; }
        h1 { font-family: 'Dancing Script', cursive; font-size: 5em; background: linear-gradient(to right, #fff, #ffd1e3); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 15px; filter: drop-shadow(0 0 15px rgba(255, 107, 157, 0.6)); line-height: 1.1; }
        .subtitle { font-family: 'Playfair Display', serif; font-size: 1.3em; font-style: italic; color: rgba(255,255,255,0.9); margin-bottom: 40px; text-shadow: var(--text-shadow); }
        .timer-section { margin-bottom: 70px; }
        .timer-title { text-align: center; font-family: 'Playfair Display', serif; font-size: 1.2em; margin-bottom: 20px; color: rgba(255,255,255,0.8); }
        .timer-box { background: var(--glass); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); border: 2px solid var(--glass-border); border-radius: 25px; padding: 25px; display: flex; justify-content: center; flex-wrap: wrap; gap: 20px; box-shadow: 0 20px 50px rgba(0,0,0,0.3); }
        .time-unit { text-align: center; min-width: 80px; position: relative; }
        .time-unit:not(:last-child)::after { content: ':'; position: absolute; right: -15px; top: 10%; font-size: 2em; color: rgba(255,255,255,0.3); font-family: 'Playfair Display', serif; }
        .time-val { font-size: 2.8em; font-weight: 700; display: block; font-family: 'Playfair Display', serif; text-shadow: 0 2px 10px rgba(0,0,0,0.2); line-height: 1; margin-bottom: 5px; }
        .time-label { font-size: 0.85em; text-transform: uppercase; letter-spacing: 2px; opacity: 0.7; }
        .section-title { text-align: center; font-family: 'Playfair Display', serif; font-size: 2.2em; margin: 80px 0 40px; position: relative; color: white; text-shadow: var(--text-shadow); }
        .section-title::after { content: '‚ô°'; display: block; font-size: 0.7em; color: var(--primary); margin-top: 10px; font-family: 'Dancing Script', cursive; }

        /* --- TEDENSKA NAGRADNA IGRA (KUPONI) --- */
        .coupon-section {
            margin-bottom: 60px;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .coupon-status-text {
            text-align: center;
            font-family: 'Playfair Display', serif;
            font-size: 1.2em;
            margin-bottom: 25px;
            color: rgba(255,255,255,0.9);
            width: 100%;
        }
        
        /* GUMB ZA ZAƒåETEK ≈ΩREBANJA */
        .start-draw-btn {
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 50px;
            font-size: 1.3em;
            font-family: 'Playfair Display', serif;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(255, 107, 157, 0.5);
            transition: all 0.3s ease;
            display: none; /* Privzeto skrit, JS ga poka≈æe */
            animation: pulse-btn 2s infinite;
            margin-bottom: 20px;
        }
        
        .start-draw-btn:active {
            transform: scale(0.95);
        }

        @keyframes pulse-btn {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 107, 157, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 15px rgba(255, 107, 157, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 107, 157, 0); }
        }

        .coupons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            width: 100%;
            justify-content: center; /* Da so 3 lepo na sredini */
        }

        /* Skrijemo grid, ko je kupon ≈æe izbran ali ≈°e ni ≈ærebano */
        .coupons-grid.hidden {
            display: none;
        }

        .coupon-card {
            background: linear-gradient(135deg, #fffaf0 0%, #ffe6f0 100%);
            border: 2px dashed var(--primary);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            color: #444;
            position: relative;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            opacity: 0; /* Zaƒçetno stanje za animacijo */
            transform: scale(0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            height: 250px;
        }
        
        /* Animacija prikaza kartic */
        .coupon-card.pop-in {
            animation: popInCard 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        @keyframes popInCard {
            0% { opacity: 0; transform: scale(0.5) translateY(50px); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
        }

        .coupon-card:hover {
            transform: translateY(-10px) rotate(2deg);
            box-shadow: 0 20px 40px rgba(255, 107, 157, 0.4);
            background: white;
            border-color: var(--accent);
        }

        .coupon-icon { font-size: 3em; margin-bottom: 10px; display: block; }
        .coupon-title { font-family: 'Playfair Display', serif; font-size: 1.3em; color: var(--accent); margin-bottom: 10px; font-weight: 700; line-height: 1.2; }
        .coupon-desc { font-size: 0.9em; line-height: 1.4; color: #666; margin-bottom: 10px; flex-grow: 1; display: flex; align-items: center; justify-content: center; }
        .coupon-action { font-size: 0.8em; color: var(--primary); font-weight: bold; text-transform: uppercase; letter-spacing: 1px; margin-top: auto; }

        /* PRIKAZ IZBRANEGA KUPONA */
        .active-coupon-container {
            display: none; /* Privzeto skrito */
            flex-direction: column;
            align-items: center;
            animation: fadeIn 1s ease;
            width: 100%;
        }

        .active-coupon-container.show {
            display: flex;
        }

        .active-coupon-card {
            background: #fff;
            border: 4px solid var(--primary);
            border-radius: 20px;
            padding: 40px;
            max-width: 400px;
            width: 100%;
            text-align: center;
            box-shadow: 0 0 50px rgba(255, 107, 157, 0.6);
            transform: scale(1.05);
            position: relative;
            overflow: hidden;
        }
        
        /* Trakec ƒçez kartico */
        .active-coupon-card::before {
            content: 'AKTIVNO';
            position: absolute;
            top: 20px;
            right: -35px;
            background: var(--accent);
            color: white;
            width: 120px;
            padding: 5px 0;
            transform: rotate(45deg);
            font-size: 0.8em;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .active-coupon-icon { font-size: 5em; margin-bottom: 20px; display: block; animation: bounce 2s infinite; }
        .active-coupon-title { font-family: 'Playfair Display', serif; font-size: 2em; color: #333; margin-bottom: 15px; }
        .active-coupon-desc { font-size: 1.1em; color: #555; line-height: 1.6; margin-bottom: 20px; }
        
        .coupon-timer-box {
            margin-top: 30px;
            background: rgba(0,0,0,0.2);
            padding: 15px 30px;
            border-radius: 50px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .coupon-timer-label { font-size: 0.9em; opacity: 0.8; margin-bottom: 5px; display: block; }
        .coupon-countdown { font-family: 'Playfair Display', serif; font-size: 1.5em; font-weight: bold; letter-spacing: 1px; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-20px);} 60% {transform: translateY(-10px);} }

        /* --- GALERIJA --- */
        .gallery-container { position: relative; height: 500px; display: flex; justify-content: center; align-items: center; perspective: 1000px; margin-bottom: 30px; width: 100%; }
        .polaroid { background: #fff; padding: 12px 12px 50px 12px; box-shadow: 0 15px 40px rgba(0,0,0,0.4); width: 320px; position: absolute; transition: all 0.7s cubic-bezier(0.25, 0.8, 0.25, 1); transform-origin: center; cursor: pointer; border-radius: 3px; }
        .polaroid img { width: 100%; height: 300px; object-fit: cover; border: 1px solid #eee; }
        .caption { font-family: 'Dancing Script', cursive; color: #444; font-size: 1.6em; text-align: center; margin-top: 20px; transform: rotate(-1deg); }
        .polaroid.active { transform: translateX(0) translateY(0) rotate(0deg) scale(1.05); z-index: 10; box-shadow: 0 25px 60px rgba(0,0,0,0.6); }
        .polaroid.left { transform: translateX(-100px) translateY(20px) rotate(-12deg) scale(0.9); z-index: 5; opacity: 0.8; }
        .polaroid.right { transform: translateX(100px) translateY(20px) rotate(12deg) scale(0.9); z-index: 5; opacity: 0.8; }
        .gallery-hint { text-align: center; color: rgba(255,255,255,0.6); font-size: 0.9em; margin-top: -20px; margin-bottom: 60px; }
        
        /* --- LJUBEZENSKO PISMO --- */
        .love-note-container { background: var(--glass); padding: 50px 30px; border-radius: 30px; margin: 80px auto; backdrop-filter: blur(20px); border: 2px solid var(--glass-border); box-shadow: 0 20px 60px rgba(0,0,0,0.3); max-width: 700px; text-align: center; }
        .note-title { font-family: 'Dancing Script', cursive; font-size: 2.8em; margin-bottom: 30px; color: var(--primary); text-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .note-text p { font-family: 'Playfair Display', serif; font-size: 1.3em; line-height: 1.8; color: rgba(255,255,255,0.95); margin-bottom: 8px; text-shadow: var(--text-shadow); }
        .note-text br { display: block; margin: 15px 0; content: " "; }
        
        /* --- SRƒåKI IN OSTALO --- */
        .heart-section { text-align: center; margin: 100px 0 60px; position: relative; }
        .big-heart { font-size: 6em; color: var(--primary); cursor: pointer; display: inline-block; transition: transform 0.1s ease-out; filter: drop-shadow(0 0 30px rgba(255, 107, 157, 0.7)); user-select: none; animation: heartbeat 1.5s ease-in-out infinite; }
        @keyframes heartbeat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        .big-heart:active { transform: scale(0.9) !important; animation: none; }
        .heart-count-box { margin-top: 20px; font-family: 'Playfair Display', serif; font-size: 1.4em; text-shadow: var(--text-shadow); }
        .mini-heart { position: fixed; font-size: 20px; color: var(--primary); pointer-events: none; animation: floatUp 1s ease-out forwards; z-index: 1000; text-shadow: 0 0 5px rgba(255,255,255,0.5); }
        @keyframes floatUp { 0% { transform: translateY(0) scale(1) rotate(0deg); opacity: 1; } 100% { transform: translateY(-150px) scale(0) rotate(360deg); opacity: 0; } }
        footer { text-align: center; padding: 40px 20px; color: rgba(255,255,255,0.6); font-size: 0.9em; border-top: 1px solid var(--glass-border); margin-top: 50px; }
        .music-control { position: fixed; bottom: 25px; right: 25px; width: 55px; height: 55px; background: var(--glass); backdrop-filter: blur(10px); border: 2px solid var(--glass-border); border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; z-index: 100; box-shadow: 0 10px 30px rgba(0,0,0,0.3); transition: all 0.3s ease; font-size: 24px; }
        .music-control:hover { background: var(--primary); border-color: var(--primary); transform: scale(1.1); }
        #particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        
        /* --- PRILAGODITVE ZA MOBILNE NAPRAVE --- */
        @media screen and (max-width: 768px) {
            h1 { font-size: 3.5em; }
            .subtitle { font-size: 1.1em; }
            .gallery-container { height: 400px; }
            .polaroid { width: 260px; }
            .polaroid img { height: 240px; }
            .timer-box { gap: 10px; padding: 15px; }
            .time-unit { min-width: 55px; }
            .time-val { font-size: 1.8em; }
            .time-unit:not(:last-child)::after { right: -8px; font-size: 1.5em; top: 5%; }
            .envelope { width: 260px; height: 170px; }
            .envelope::before {
                border-left: 130px solid transparent;
                border-right: 130px solid transparent;
                border-top: 100px solid #f8f8f8;
            }

            .envelope::after {
                border-left: 130px solid #ececec;
                border-right: 130px solid #ececec;
                border-bottom: 85px solid #d0d0d0;
                border-top: 85px solid transparent;
            }

            .letter { 
                width: 240px; 
                height: 140px; 
                left: 10px;
                bottom: 0;
            } 
            
            .envelope-container.open .letter { 
                transform: translateY(-100px); 
            }
            
            .coupons-grid { grid-template-columns: 1fr; }
        }
        @keyframes pulse { 0% { opacity: 0.6; transform: scale(1); } 50% { opacity: 1; transform: scale(1.05); } 100% { opacity: 0.6; transform: scale(1); } }
    </style>
</head>
<body>

    <div id="intro-overlay">
        <div class="envelope-container" id="envelopeBtn">
            <div class="envelope">
                <div class="letter">
                    <h2>Za Gajo ‚ô°</h2>
                    <p style="font-size: 0.9em; margin-top:15px; font-family: 'Playfair Display';">Posebno pismo zate...</p>
                </div>
            </div>
        </div>
        <div class="tap-hint">Pritisni ovojnico, da odpre≈° sporoƒçilo üëÜ</div>
    </div>

    <canvas id="particles"></canvas>

    <div class="main-content" id="mainContent">
        <div class="container">
            <header>
                <h1>Draga Gaja</h1>
                <p class="subtitle">Mojo predrago punco in bodoƒço ≈æeno.<br>Zate svet, zate vse.</p>
            </header>

            <div class="timer-section">
                <p class="timer-title">Skupaj ustvarjava spomine ≈æe...</p>
                <div class="timer-box">
                    <div class="time-unit">
                        <span class="time-val" id="years">0</span>
                        <span class="time-label">Let</span>
                    </div>
                    <div class="time-unit">
                        <span class="time-val" id="days">0</span>
                        <span class="time-label">Dni</span>
                    </div>
                    <div class="time-unit">
                        <span class="time-val" id="hours">0</span>
                        <span class="time-label">Ur</span>
                    </div>
                    <div class="time-unit">
                        <span class="time-val" id="minutes">0</span>
                        <span class="time-label">Min</span>
                    </div>
                    <div class="time-unit">
                        <span class="time-val" id="seconds">0</span>
                        <span class="time-label">Sek</span>
                    </div>
                </div>
            </div>

            <h2 class="section-title">Tvoja Tedenska Sreƒçka</h2>
            <div class="coupon-section">
                <p class="coupon-status-text" id="couponStatusText">Preveri, kaj ti prina≈°a sreƒça ta teden! ‚ú®</p>
                
                <button class="start-draw-btn" id="startDrawBtn">‚ú® Preme≈°aj in izberi ‚ú®</button>

                <div class="coupons-grid hidden" id="couponsSelectionGrid">
                    </div>

                <div class="active-coupon-container" id="activeCouponContainer">
                    <div class="active-coupon-card">
                        <span class="active-coupon-icon" id="activeIcon">üéÅ</span>
                        <div class="active-coupon-title" id="activeTitle">Naslov</div>
                        <p class="active-coupon-desc" id="activeDesc">Opis kupona...</p>
                    </div>
                    
                    <div class="coupon-timer-box">
                        <span class="coupon-timer-label">Nov kupon bo na voljo ƒçez:</span>
                        <div class="coupon-countdown" id="couponCountdown">0d 00h 00m 00s</div>
                    </div>
                </div>
            </div>

             <h2 class="section-title">Ujeti Trenutki</h2>
             <div class="gallery-container" id="gallery">
                 <div class="polaroid active">
                     <img src="photo1.JPG" alt="Spomin 1">
                     <div class="caption">Najin Dunaj ‚ú®</div>
                 </div>
                 <div class="polaroid right">
                     <img src="photo3.JPG" alt="Spomin 2">
                     <div class="caption">Moja Burger Queen üçî</div>
                 </div>
                 <div class="polaroid left">
                     <img src="photo2.JPG" alt="Spomin 3">
                     <div class="caption">Sne≈æena kraljica ‚ù§Ô∏è</div>
                 </div>
             </div>
             <p class="gallery-hint">Klikni na sliko, da jo prelo≈æi≈° üëÜ</p>

            <div class="love-note-container">
                <h2 class="note-title">Zakaj Te Imam Rad</h2>
                <div class="note-text">
                    <p>Gaja, tvoj pogled kot plamen v meni gori,</p>
                    <p>v njem sreƒço najdem, ki nikdar ne zbledi.</p>
                    <p>Tvoj nasmeh kot sonce razsvetli najlep≈°i cvet,</p>
                    <p>brez tebe ≈æivljenje je tih, prazen svet.</p>
                    <br>
                    <p>Tvoj dotik me vodi kot ne≈æna melodija,</p>
                    <p>v njem ple≈°e najina veƒçna harmonija.</p>
                    <p>Gaja, ti si pesem, ki nikdar ne utihne,</p>
                    <p>ljubezen v mojem srcu zate vedno utripne.</p>    
                </div>
            </div>

            <div class="heart-section">
                <div class="big-heart" id="tapHeart">üíñ</div>
                <div class="heart-count-box">
                    Tvojih dotikov ljubezni: <span id="tapCounter" style="font-weight:bold; color:var(--primary);">0</span>
                </div>
                <p style="font-size: 0.9em; opacity: 0.7; margin-top: 10px;">Tapkaj srce za eksplozijo ljubezni! üí•</p>
            </div>

            <footer>
                <p>Narejeno z neskonƒçno ljubeznijo, samo zate Gaja üíï<br>Za vedno tvoj.</p>
            </footer>
        </div>
    </div>

    <div class="music-control" id="musicToggle">
        üéµ
    </div>

    <audio id="bgMusic" loop>
        <source src="https://cdn.pixabay.com/download/audio/2022/02/07/audio_1822002e2e.mp3?filename=piano-moment-11985.mp3" type="audio/mp3">
        Va≈° brskalnik ne podpira avdio elementa.
    </audio>

    <script>
        // --- KONFIGURACIJA DATUMA ---
        const startDate = new Date(2024, 1, 17); 
        
        // --- BAZA KUPONOV ---
        const couponPool = [
            { icon: "üíÜ‚Äç‚ôÄÔ∏è", title: "Masa≈æa Hrbta", desc: "30 minutna spro≈°ƒçujoƒça masa≈æa hrbta z oljem po izbiri." },
            { icon: "üçø", title: "Filmski Veƒçer", desc: "Pri meni: jaz pripravim kokice in pijaƒço, ti izbere≈° film." },
            { icon: "üë®‚Äçüç≥", title: "Masterchef Veƒçerja", desc: "Pripravim ti veƒçerjo pri meni. Ti samo pride≈° in u≈æiva≈°." },
            { icon: "ü•û", title: "Zajtrk v Posteljo", desc: "Ko prespi≈°: kraljevski zaƒçetek dneva, postre≈æen v postelji." },
            { icon: "üöï", title: "Osebni ≈†ofer", desc: "Poberem te ali peljem, kamor ≈æeli≈° (znotraj razuma!)." },
            { icon: "üçï", title: "Pizza Veƒçer", desc: "Naroƒçiva ali speƒçeva najbolj≈°o pizzo." },
            { icon: "üç¶", title: "Sladoledni Zmenek", desc: "Peljem te na najbolj≈°i sladoled v mestu (jaz ƒçastim)." },
            { icon: "üíÜ‚Äç‚ôÄÔ∏è", title: "Masa≈æa Lasi≈°ƒça", desc: "5 minutno ƒçohanje po glavi za popolno sprostitev." },
            { icon: "üç∑", title: "Vino & Debata", desc: "Brez telefonov, samo midva, kozarec vina in dober pogovor." },
            { icon: "üÉè", title: "Joker Kupon", desc: "Ena ≈æelja po tvoji izbiri (v mejah normale!)." },
            { icon: "üë£", title: "Masa≈æa Stopal", desc: "Po dolgem dnevu si tvoja stopala zaslu≈æijo razvajanje." },
            { icon: "üöó", title: "Izlet v Neznano", desc: "Usediva se v avto in se odpeljeva na kavo na lep razgled." },
            { icon: "üç´", title: "Sladka Dostava", desc: "Dostavim ti tvojo najljub≈°o ƒçokolado, ko ima≈° 'sladko krizo'." },
            { icon: "üíã", title: "Napad Poljubƒçkov", desc: "Unovƒçljivo takoj. Pripravi se na 100 poljubƒçkov." },
            { icon: "üé≤", title: "Veƒçer Iger", desc: "Izzovem te v tvoji najljub≈°i dru≈æabni igri." },
            { icon: "üõÅ", title: "Spa Veƒçer", desc: "Pripravim ti masko za obraz in sveƒçke." },
            { icon: "üõçÔ∏è", title: "Shopping Asistent", desc: "Greva v ≈°oping, jaz sem tvoj osebni nosaƒç vreƒçk in svetovalec." },
            { icon: "üì∏", title: "Photo Session", desc: "Naredim ti 5 top fotk za Instagram (brez prito≈æevanja!)." },
            { icon: "üï∫", title: "Ples v Dvoje", desc: "Zavrtiva se na najino pesem v moji dnevni sobi." },
            { icon: "ü•û", title: "Palaƒçinke Party", desc: "Speƒçem goro palaƒçink z Nutello (ali marmelado)." }
        ];

        // --- GLOBALNE SPREMENLJIVKE ---
        const envelopeBtn = document.getElementById('envelopeBtn');
        const introOverlay = document.getElementById('intro-overlay');
        const mainContent = document.getElementById('mainContent');
        const bgMusic = document.getElementById('bgMusic');
        const musicToggle = document.getElementById('musicToggle');
        const startDrawBtn = document.getElementById('startDrawBtn');
        
        let isMusicPlaying = false;

        // --- 1. LOGIKA KUPONOV (NAGRADNA IGRA) ---
        // SPREMENJENO: ƒåas ƒçakanja je zdaj 5 dni
        const WAIT_DAYS_IN_MS = 5 * 24 * 60 * 60 * 1000; 
        
        function initCoupons() {
            const lastClaimRaw = localStorage.getItem('gaja_last_claim');
            const activeCouponRaw = localStorage.getItem('gaja_active_coupon');
            const usedIndicesRaw = localStorage.getItem('gaja_used_indices');

            const now = new Date().getTime();
            let lastClaim = lastClaimRaw ? parseInt(lastClaimRaw) : 0;
            let usedIndices = usedIndicesRaw ? JSON.parse(usedIndicesRaw) : [];

            // Preveri, ƒçe je kupon ≈°e veljaven (manj kot 5 dni)
            if (activeCouponRaw && (now - lastClaim < WAIT_DAYS_IN_MS)) {
                // Kupon je ≈°e aktiven
                const coupon = JSON.parse(activeCouponRaw);
                showActiveCouponUI(coupon, lastClaim + WAIT_DAYS_IN_MS);
            } else {
                // ƒåas za nov izbor - Poka≈æi gumb za zaƒçetek
                showStartButton();
            }
        }

        function showStartButton() {
            const grid = document.getElementById('couponsSelectionGrid');
            const activeContainer = document.getElementById('activeCouponContainer');
            const statusText = document.getElementById('couponStatusText');

            grid.classList.add('hidden');
            activeContainer.classList.remove('show');
            startDrawBtn.style.display = 'block'; // Poka≈æi gumb
            statusText.innerText = "ƒåas je za nov kupon! Klikni gumb spodaj za ≈ærebanje.";
        }

        // Ko klikne gumb, spro≈æimo animacijo in prika≈æemo kartice
        startDrawBtn.addEventListener('click', () => {
            const usedIndicesRaw = localStorage.getItem('gaja_used_indices');
            let usedIndices = usedIndicesRaw ? JSON.parse(usedIndicesRaw) : [];
            
            // 1. Skrij gumb
            startDrawBtn.style.display = 'none';
            document.getElementById('couponStatusText').innerText = "Izberi eno kartico...";
            
            // 2. Pripravi in prika≈æi kartice z zamikom
            setupSelectionUI(usedIndices);
        });

        function setupSelectionUI(usedIndices) {
            const grid = document.getElementById('couponsSelectionGrid');
            grid.classList.remove('hidden');
            grid.innerHTML = '';

            // Algoritem za izbor 3 nakljuƒçnih kuponov (prej 4)
            let availableIndices = [];
            for(let i=0; i<couponPool.length; i++) {
                if(!usedIndices.includes(i)) availableIndices.push(i);
            }

            // ƒåe zmanjka kuponov (manj kot 3 na voljo), resetiraj
            if (availableIndices.length < 3) {
                usedIndices = [];
                availableIndices = couponPool.map((_, i) => i);
                localStorage.setItem('gaja_used_indices', JSON.stringify([]));
            }

            const shuffled = availableIndices.sort(() => 0.5 - Math.random());
            const selectedIndices = shuffled.slice(0, 3); // IZBEREMO 3 KUPONE

            selectedIndices.forEach((index, i) => {
                const coupon = couponPool[index];
                const card = document.createElement('div');
                card.className = 'coupon-card'; // Brez 'visible' razreda na zaƒçetku
                card.innerHTML = `
                    <span class="coupon-icon">‚ùì</span>
                    <div class="coupon-title">Skriti Kupon</div>
                    <p class="coupon-desc">Klikni za razkritje...</p>
                    <div class="coupon-action">IZBERI</div>
                `;
                
                card.onclick = () => selectCoupon(index, usedIndices);
                grid.appendChild(card);

                // ANIMACIJA: Kartice se pojavijo ena za drugo (zamik 200ms)
                setTimeout(() => {
                    card.classList.add('pop-in');
                }, i * 200);
            });
        }

        function selectCoupon(index, usedIndices) {
            const coupon = couponPool[index];
            const now = new Date().getTime();

            // Shrani v localStorage
            localStorage.setItem('gaja_last_claim', now);
            localStorage.setItem('gaja_active_coupon', JSON.stringify(coupon));
            
            usedIndices.push(index);
            localStorage.setItem('gaja_used_indices', JSON.stringify(usedIndices));

            // Poka≈æi UI za aktiven kupon
            showActiveCouponUI(coupon, now + WAIT_DAYS_IN_MS);
        }

        function showActiveCouponUI(coupon, expiryTime) {
            const grid = document.getElementById('couponsSelectionGrid');
            const statusText = document.getElementById('couponStatusText');
            const activeContainer = document.getElementById('activeCouponContainer');
            
            // Prepriƒçamo se, da je gumb skrit, ƒçe pridemo direktno sem
            startDrawBtn.style.display = 'none';

            grid.classList.add('hidden');
            grid.innerHTML = ''; 
            statusText.innerText = "Tvoj ekskluzivni kupon za naslednjih 5 dni:";
            
            document.getElementById('activeIcon').innerText = coupon.icon;
            document.getElementById('activeTitle').innerText = coupon.title;
            document.getElementById('activeDesc').innerText = coupon.desc;

            activeContainer.classList.add('show');

            startCouponTimer(expiryTime);
        }

        function startCouponTimer(expiryTime) {
            const timerEl = document.getElementById('couponCountdown');
            if (window.couponInterval) clearInterval(window.couponInterval);

            function update() {
                const now = new Date().getTime();
                const distance = expiryTime - now;

                if (distance < 0) {
                    clearInterval(window.couponInterval);
                    timerEl.innerText = "ƒåas je za nov kupon! Osve≈æi stran.";
                    return;
                }

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                timerEl.innerText = `${days}d ${hours}h ${minutes}m ${seconds}s`;
            }

            update();
            window.couponInterval = setInterval(update, 1000);
        }

        // --- 2. ODPIRANJE OVOJNICE ---
        envelopeBtn.addEventListener('click', () => {
            envelopeBtn.classList.add('open');
            document.querySelector('.tap-hint').style.opacity = '0';
            
            bgMusic.volume = 0.4; 
            bgMusic.play().then(() => {
                isMusicPlaying = true;
                musicToggle.innerHTML = '‚è∏'; 
            }).catch(e => console.log("Audio play error"));

            setTimeout(() => {
                introOverlay.style.opacity = '0';
                introOverlay.style.visibility = 'hidden';
                mainContent.style.display = 'block';
                
                setTimeout(() => {
                    mainContent.style.opacity = '1';
                    initCoupons(); // INICIALIZACIJA KUPONOV
                }, 100);
            }, 6000); 
        });

        // --- 3. NADZOR GLASBE ---
        musicToggle.addEventListener('click', () => {
            if (isMusicPlaying) {
                bgMusic.pause();
                musicToggle.innerHTML = 'üéµ'; 
            } else {
                bgMusic.play();
                musicToggle.innerHTML = '‚è∏'; 
            }
            isMusicPlaying = !isMusicPlaying;
        });

        // --- 4. ≈†TEVEC ZVEZE ---
        function updateTimer() {
            const now = new Date();
            const diff = now - startDate; 
            const daysTotal = Math.floor(diff / (1000 * 60 * 60 * 24));
            const years = Math.floor(daysTotal / 365);
            const days = daysTotal % 365;
            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const minutes = Math.floor((diff / (1000 * 60)) % 60);
            const seconds = Math.floor((diff / 1000) % 60);

            document.getElementById('years').innerText = years;
            document.getElementById('days').innerText = days;
            document.getElementById('hours').innerText = hours;
            document.getElementById('minutes').innerText = minutes;
            document.getElementById('seconds').innerText = seconds;
        }
        updateTimer();
        setInterval(updateTimer, 1000);

        // --- 5. GALERIJA ---
        const cards = document.querySelectorAll('.polaroid');
        let currentIndex = 0;
        function updateCards() {
            cards.forEach((card, index) => {
                card.classList.remove('active', 'left', 'right');
                let position = (index - currentIndex + cards.length) % cards.length;
                if (position === 0) card.classList.add('active'); 
                else if (position === 1) card.classList.add('right'); 
                else card.classList.add('left'); 
            });
        }
        cards.forEach(card => card.addEventListener('click', () => {
            currentIndex = (currentIndex + 1) % cards.length;
            updateCards();
        }));
        updateCards();

        // --- 6. SRCE ---
        const tapHeart = document.getElementById('tapHeart');
        const tapCounterDisplay = document.getElementById('tapCounter');
        let taps = 0;
        tapHeart.addEventListener('pointerdown', (e) => {
            e.preventDefault(); 
            taps++;
            tapCounterDisplay.innerText = taps;
            const rect = tapHeart.getBoundingClientRect();
            for(let i=0; i<10; i++) createMiniHeart(rect.left + rect.width/2, rect.top + rect.height/2);
        });

        function createMiniHeart(x, y) {
            const heart = document.createElement('div');
            heart.innerHTML = '‚ù§';
            heart.className = 'mini-heart';
            const size = Math.random() * 20 + 15;
            heart.style.fontSize = size + 'px';
            heart.style.left = (x - size/2) + 'px';
            heart.style.top = (y - size/2) + 'px';
            document.body.appendChild(heart);
            const angle = Math.random() * Math.PI * 2; 
            const velocity = Math.random() * 150 + 80; 
            setTimeout(() => {
                 heart.style.transform = `translate(${Math.cos(angle)*velocity}px, ${Math.sin(angle)*velocity - 100}px) rotate(${Math.random()*360}deg) scale(0)`;
                 heart.style.opacity = '0';
            }, 10);
            setTimeout(() => heart.remove(), 1000);
        }

        // --- 7. PARTICLES ---
        const canvas = document.getElementById('particles');
        const ctx = canvas.getContext('2d');
        let particlesArray = [];
        function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = canvas.height + Math.random() * 100; 
                this.size = Math.random() * 15 + 8; 
                this.speedY = Math.random() * 1 + 0.5; 
                this.opacity = Math.random() * 0.4 + 0.1; 
                this.type = Math.random() > 0.7 ? '‚ù§' : '‚Ä¢';
            }
            update() {
                this.y -= this.speedY; 
                if (this.y < -50) {
                    this.y = canvas.height + 50;
                    this.x = Math.random() * canvas.width;
                }
            }
            draw() {
                ctx.fillStyle = `rgba(255, 182, 193, ${this.opacity})`;
                ctx.font = this.size + 'px Arial';
                ctx.fillText(this.type, this.x, this.y);
            }
        }
        function initParticles() { for (let i = 0; i < 40; i++) particlesArray.push(new Particle()); }
        initParticles();
        function animateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height); 
            particlesArray.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(animateParticles);
        }
        animateParticles();
    </script>
</body>
</html>