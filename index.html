<!DOCTYPE html>
<html lang="sl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="robots" content="noindex, nofollow">
    <title>Za Gajo ‚ô°</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lato:wght@300;400&display=swap" rel="stylesheet">
    <style>
        /* --- DEFINICIJA SPREMENLJIVK IN OSNOV --- */
        :root {
            --primary: #ff6b9d; /* Glavna roza barva */
            --accent: #7e22ce;  /* Poudarek vijoliƒçne */
            --glass: rgba(255, 255, 255, 0.15); /* Uƒçinek motnega stekla */
            --glass-border: rgba(255, 255, 255, 0.3);
            --text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            --bg-gradient: linear-gradient(135deg, #1a1a2e 0%, #2a1b3d 25%, #4a1942 50%, #8e2a5b 75%, #d63a77 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Lato', sans-serif;
            background: var(--bg-gradient);
            background-size: 400% 400%;
            animation: gradientBG 25s ease infinite;
            min-height: 100vh;
            color: white;
            overflow-x: hidden; 
            position: relative;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- OVOJNICA (INTRO SCREEN) - PRENOVLJENO --- */
        #intro-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #1a1a2e; 
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            transition: opacity 1s ease, visibility 1s ease;
        }

        .envelope-container {
            cursor: pointer;
            transition: transform 0.3s ease;
            position: relative;
        }

        .envelope-container:hover {
            transform: scale(1.02); 
        }

        .envelope {
            position: relative;
            width: 300px;
            height: 200px;
            background: #e0e0e0; /* Ozadje koverte (notranjost) */
            border-radius: 0 0 10px 10px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: flex-end; /* Pismo poravnamo na dno */
            /* overflow: hidden; SMO ODSTRANILI, DA SE PISMO VIDI KO GRE VEN */
        }

        /* POKROV (Zgornji del) - Najvi≈°ji nivo */
        .envelope::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            border-left: 150px solid transparent;
            border-right: 150px solid transparent;
            border-top: 110px solid #f8f8f8; /* Svetlej≈°a barva za pokrov */
            transform-origin: top;
            transition: transform 2s cubic-bezier(0.4, 0, 0.2, 1) 0s, z-index 0.1s 0.5s;
            z-index: 20; /* Najvi≈°je, dokler se ne odpre */
        }

        /* ≈ΩEPEK (Spodnji del) - Srednji nivo */
        .envelope::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
            border-left: 150px solid #ececec;
            border-right: 150px solid #ececec;
            border-bottom: 100px solid #d0d0d0;
            border-top: 100px solid transparent;
            border-radius: 0 0 10px 10px;
            z-index: 10; /* Vi≈°je od pisma, ni≈æje od pokrova */
            pointer-events: none;
        }

        /* PISMO - Najni≈æji nivo (skrito v ≈æepku) */
        .letter {
            position: absolute;
            width: 280px; /* Malo o≈æje od koverte, da lep≈°e sede */
            height: 170px; 
            background: #fffaf0; 
            bottom: 0; /* Zaƒçnemo na dnu koverte */
            left: 10px; /* Centrirano (300 - 280) / 2 */
            transition: transform 5s ease-in-out, box-shadow 4s ease; /* ZELO POƒåASNO! */
            z-index: 5; /* Ni≈æje od ≈æepka (10) */
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
            color: #333;
            border: 1px solid #eee;
            padding: 15px;
        }

        .letter h2 { 
            font-family: 'Dancing Script', cursive; 
            font-size: 2.2em; 
            color: var(--primary); 
            margin-bottom: 5px; 
        }

        /* --- ANIMACIJE IN EFEKTI --- */

        /* Ko se odpre: Pokrov gre nazaj */
        .envelope-container.open .envelope::before {
            transform: rotateX(180deg);
            z-index: 1; /* Ko se odpre, gre pokrov ƒçisto zadaj */
        }

        /* Ko se odpre: Pismo gre gor */
        .envelope-container.open .letter {
            transform: translateY(-120px); /* Dvigne se iz koverte */
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.8), 0 0 40px rgba(255, 107, 157, 0.4); /* EFEKT SIJAJA */
            z-index: 5; /* Ko je zunaj, je nad vsem (opcijsko, lahko ostane v ≈æepku) */
        }

        /* DODATNI EFEKT: Lebdeƒça srƒçka okoli pisma */
        .envelope-container.open .letter::after {
            content: 'üíñ';
            position: absolute;
            top: -20px;
            right: -10px;
            font-size: 24px;
            animation: floatingHeart 3s infinite ease-in-out;
            opacity: 0;
            animation-delay: 2s; /* Poƒçaka da se pismo dvigne */
        }

        .envelope-container.open .letter::before {
            content: '‚ú®';
            position: absolute;
            top: auto;
            bottom: 50px;
            left: 20px;
            font-size: 24px;
            animation: floatingSparkle 4s infinite ease-in-out;
            opacity: 0;
            animation-delay: 0.5s;
        }
        .envelope-container.open {
            animation: heart-pulse 1.5s infinite ease-in-out; 
            transform: scale(1.02); /* Ohrani osnovni transform, da prepreƒçi utripanje hover efekta */
        }
        @keyframes floatingHeart {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateY(-60px) rotate(20deg); opacity: 0; } /* POPRAVEK: Dvigne se 60px navzgor (prej 40px) */
        }

        @keyframes floatingSparkle {
            0% { transform: translateY(0) scale(0.8) rotate(0deg); opacity: 0.2; } /* Dodan translateY(0) */
            50% { transform: translateY(-30px) scale(1.2) rotate(180deg); opacity: 1; } /* Sredina animacije */
            100% { transform: translateY(-60px) scale(0.8) rotate(360deg); opacity: 0; } /* POPRAVEK: Dvigne se 60px navzgor */
        }
        @keyframes heart-pulse {
            0% { transform: scale(1.02); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1.02); }
        }
                
        /* --- OSTALI STILI (Nespremenjeni) --- */
        .tap-hint { margin-top: 60px; color: rgba(255,255,255,0.7); font-size: 1em; letter-spacing: 1px; animation: pulse 2s infinite; }
        .main-content { opacity: 0; transition: opacity 1.5s ease; display: none; }
        .container { max-width: 900px; margin: 0 auto; padding: 20px 15px 60px; position: relative; z-index: 2; }
        header { text-align: center; padding: 70px 0 50px; }
        h1 { font-family: 'Dancing Script', cursive; font-size: 5em; background: linear-gradient(to right, #fff, #ffd1e3); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 15px; filter: drop-shadow(0 0 15px rgba(255, 107, 157, 0.6)); line-height: 1.1; }
        .subtitle { font-family: 'Playfair Display', serif; font-size: 1.3em; font-style: italic; color: rgba(255,255,255,0.9); margin-bottom: 40px; text-shadow: var(--text-shadow); }
        .timer-section { margin-bottom: 70px; }
        .timer-title { text-align: center; font-family: 'Playfair Display', serif; font-size: 1.2em; margin-bottom: 20px; color: rgba(255,255,255,0.8); }
        .timer-box { background: var(--glass); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); border: 2px solid var(--glass-border); border-radius: 25px; padding: 25px; display: flex; justify-content: center; flex-wrap: wrap; gap: 20px; box-shadow: 0 20px 50px rgba(0,0,0,0.3); }
        .time-unit { text-align: center; min-width: 80px; position: relative; }
        .time-unit:not(:last-child)::after { content: ':'; position: absolute; right: -15px; top: 10%; font-size: 2em; color: rgba(255,255,255,0.3); font-family: 'Playfair Display', serif; }
        .time-val { font-size: 2.8em; font-weight: 700; display: block; font-family: 'Playfair Display', serif; text-shadow: 0 2px 10px rgba(0,0,0,0.2); line-height: 1; margin-bottom: 5px; }
        .time-label { font-size: 0.85em; text-transform: uppercase; letter-spacing: 2px; opacity: 0.7; }
        .section-title { text-align: center; font-family: 'Playfair Display', serif; font-size: 2.2em; margin: 80px 0 40px; position: relative; color: white; text-shadow: var(--text-shadow); }
        .section-title::after { content: '‚ô°'; display: block; font-size: 0.7em; color: var(--primary); margin-top: 10px; font-family: 'Dancing Script', cursive; }
        .timeline { position: relative; max-width: 100%; margin: 60px 0; padding: 20px 0; }
        .timeline::after { content: ''; position: absolute; width: 3px; background: rgba(255,255,255,0.2); top: 0; bottom: 0; left: 50%; margin-left: -1.5px; border-radius: 5px; }
        .timeline-item { padding: 10px 40px; position: relative; background-color: inherit; width: 50%; box-sizing: border-box; opacity: 0; transform: translateY(50px); transition: all 1s ease; }
        .timeline-item.visible { opacity: 1; transform: translateY(0); }
        .timeline-item::after { content: '‚ù§'; position: absolute; width: 36px; height: 36px; right: -18px; background-color: var(--primary); border: 4px solid #fff; top: 20px; border-radius: 50%; z-index: 1; display: flex; align-items: center; justify-content: center; color: white; font-size: 14px; box-shadow: 0 0 15px rgba(255, 107, 157, 0.5); }
        .left { left: 0; }
        .right { left: 50%; }
        .left::before { content: " "; height: 0; position: absolute; top: 26px; width: 0; z-index: 1; right: 30px; border: medium solid white; border-width: 10px 0 10px 10px; border-color: transparent transparent transparent rgba(255,255,255,0.9); }
        .right::before { content: " "; height: 0; position: absolute; top: 26px; width: 0; z-index: 1; left: 30px; border: medium solid white; border-width: 10px 10px 10px 0; border-color: transparent rgba(255,255,255,0.9) transparent transparent; }
        .right::after { left: -18px; }
        .content-box { padding: 25px; background: rgba(255,255,255,0.9); position: relative; border-radius: 15px; color: #333; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .content-box h3 { font-family: 'Playfair Display', serif; color: var(--accent); margin-bottom: 8px; font-size: 1.4em; }
        .date-label { font-size: 0.9em; color: var(--primary); display: block; margin-bottom: 12px; font-weight: 700; letter-spacing: 0.5px; }
        .content-box p { line-height: 1.6; font-size: 1.05em; }
        .gallery-container { position: relative; height: 500px; display: flex; justify-content: center; align-items: center; perspective: 1000px; margin-bottom: 30px; }
        .polaroid { background: #fff; padding: 12px 12px 50px 12px; box-shadow: 0 15px 40px rgba(0,0,0,0.4); width: 320px; position: absolute; transition: all 0.7s cubic-bezier(0.25, 0.8, 0.25, 1); transform-origin: center; cursor: pointer; border-radius: 3px; }
        .polaroid img { width: 100%; height: 300px; object-fit: cover; border: 1px solid #eee; }
        .caption { font-family: 'Dancing Script', cursive; color: #444; font-size: 1.6em; text-align: center; margin-top: 20px; transform: rotate(-1deg); }
        .polaroid.active { transform: translateX(0) translateY(0) rotate(0deg) scale(1.05); z-index: 10; box-shadow: 0 25px 60px rgba(0,0,0,0.6); }
        .polaroid.left { transform: translateX(-100px) translateY(20px) rotate(-12deg) scale(0.9); z-index: 5; opacity: 0.8; }
        .polaroid.right { transform: translateX(100px) translateY(20px) rotate(12deg) scale(0.9); z-index: 5; opacity: 0.8; }
        .gallery-hint { text-align: center; color: rgba(255,255,255,0.6); font-size: 0.9em; margin-top: -20px; margin-bottom: 60px; }
        .love-note-container { background: var(--glass); padding: 50px 30px; border-radius: 30px; margin: 80px auto; backdrop-filter: blur(20px); border: 2px solid var(--glass-border); box-shadow: 0 20px 60px rgba(0,0,0,0.3); max-width: 700px; text-align: center; }
        .note-title { font-family: 'Dancing Script', cursive; font-size: 2.8em; margin-bottom: 30px; color: var(--primary); text-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .note-text p { font-family: 'Playfair Display', serif; font-size: 1.3em; line-height: 1.8; color: rgba(255,255,255,0.95); margin-bottom: 8px; text-shadow: var(--text-shadow); }
        .note-text br { display: block; margin: 15px 0; content: " "; }
        .heart-section { text-align: center; margin: 100px 0 60px; position: relative; }
        .big-heart { font-size: 6em; color: var(--primary); cursor: pointer; display: inline-block; transition: transform 0.1s ease-out; filter: drop-shadow(0 0 30px rgba(255, 107, 157, 0.7)); user-select: none; animation: heartbeat 1.5s ease-in-out infinite; }
        @keyframes heartbeat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        .big-heart:active { transform: scale(0.9) !important; animation: none; }
        .heart-count-box { margin-top: 20px; font-family: 'Playfair Display', serif; font-size: 1.4em; text-shadow: var(--text-shadow); }
        .mini-heart { position: fixed; font-size: 20px; color: var(--primary); pointer-events: none; animation: floatUp 1s ease-out forwards; z-index: 1000; text-shadow: 0 0 5px rgba(255,255,255,0.5); }
        @keyframes floatUp { 0% { transform: translateY(0) scale(1) rotate(0deg); opacity: 1; } 100% { transform: translateY(-150px) scale(0) rotate(360deg); opacity: 0; } }
        footer { text-align: center; padding: 40px 20px; color: rgba(255,255,255,0.6); font-size: 0.9em; border-top: 1px solid var(--glass-border); margin-top: 50px; }
        .music-control { position: fixed; bottom: 25px; right: 25px; width: 55px; height: 55px; background: var(--glass); backdrop-filter: blur(10px); border: 2px solid var(--glass-border); border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; z-index: 100; box-shadow: 0 10px 30px rgba(0,0,0,0.3); transition: all 0.3s ease; font-size: 24px; }
        .music-control:hover { background: var(--primary); border-color: var(--primary); transform: scale(1.1); }
        #particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        
        /* --- PRILAGODITVE ZA MOBILNE NAPRAVE --- */
        @media screen and (max-width: 768px) {
            h1 { font-size: 3.5em; }
            .subtitle { font-size: 1.1em; }
            .timeline::after { left: 35px; } 
            .timeline-item { width: 100%; padding-left: 75px; padding-right: 15px; }
            .timeline-item::before { left: 65px; border: medium solid white; border-width: 10px 10px 10px 0; border-color: transparent rgba(255,255,255,0.9) transparent transparent; }
            .left::after, .right::after { left: 17px; }
            .right { left: 0%; }
            .gallery-container { height: 400px; }
            .polaroid { width: 260px; }
            .polaroid img { height: 240px; }
            .timer-box { gap: 10px; padding: 15px; }
            .time-unit { min-width: 55px; }
            .time-val { font-size: 1.8em; }
            .time-unit:not(:last-child)::after { right: -8px; font-size: 1.5em; top: 5%; }
            .envelope { width: 260px; height: 170px; }
            .envelope::before {
                border-left: 130px solid transparent;
                border-right: 130px solid transparent;
                border-top: 100px solid #f8f8f8;
            }

            .envelope::after {
                border-left: 130px solid #ececec;
                border-right: 130px solid #ececec;
                border-bottom: 85px solid #d0d0d0;
                border-top: 85px solid transparent;
            }

            .letter { 
                width: 240px; /* Prilagojena ≈°irina */
                height: 140px; 
                left: 10px;
                bottom: 0;
            } 
            
            .envelope-container.open .letter { 
                transform: translateY(-100px); /* Malo manj≈°i dvig na telefonu */
            } 
        }
        @keyframes pulse { 0% { opacity: 0.6; transform: scale(1); } 50% { opacity: 1; transform: scale(1.05); } 100% { opacity: 0.6; transform: scale(1); } }
    </style>
</head>
<body>

    <div id="intro-overlay">
        <div class="envelope-container" id="envelopeBtn">
            <div class="envelope">
                <div class="letter">
                    <h2>Za Gajo ‚ô°</h2>
                    <p style="font-size: 0.9em; margin-top:15px; font-family: 'Playfair Display';">Posebno pismo zate...</p>
                </div>
            </div>
        </div>
        <div class="tap-hint">Pritisni ovojnico, da odpre≈° sporoƒçilo üëÜ</div>
    </div>

    <canvas id="particles"></canvas>

    <div class="main-content" id="mainContent">
        <div class="container">
            <header>
                <h1>Draga Gaja</h1>
                <p class="subtitle">Mojo predrago punco in bodoƒço ≈æeno.<br>Zate svet, zate vse.</p>
            </header>

            <div class="timer-section">
                <p class="timer-title">Skupaj ustvarjava spomine ≈æe...</p>
                <div class="timer-box">
                    <div class="time-unit">
                        <span class="time-val" id="years">0</span>
                        <span class="time-label">Let</span>
                    </div>
                    <div class="time-unit">
                        <span class="time-val" id="days">0</span>
                        <span class="time-label">Dni</span>
                    </div>
                    <div class="time-unit">
                        <span class="time-val" id="hours">0</span>
                        <span class="time-label">Ur</span>
                    </div>
                    <div class="time-unit">
                        <span class="time-val" id="minutes">0</span>
                        <span class="time-label">Min</span>
                    </div>
                    <div class="time-unit">
                        <span class="time-val" id="seconds">0</span>
                        <span class="time-label">Sek</span>
                    </div>
                </div>
            </div>

            <h2 class="section-title">Najina Zgodba</h2>
            <div class="timeline">
                <div class="timeline-item left">
                    <div class="content-box">
                        <img src="photo1.JPG" alt="Zaƒçetek najine poti" style="width:100%; border-radius: 10px; margin-bottom: 15px; border: 1px solid #eee;">
                        <h3>Uradni Zaƒçetek</h3>
                        <span class="date-label">17. Februar 2024</span>
                        <p>Dan, ko sva rekla "midva". Zaƒçetek najlep≈°ega poglavja v mojem ≈æivljenju. Skupaj zreva v isto smer.</p>
                    </div>
                </div>
                <div class="timeline-item right">
                    <div class="content-box">
                        <img src="photo3.JPG" alt="Tvoja igrivost" style="width:100%; border-radius: 10px; margin-bottom: 15px; border: 1px solid #eee;">
                        <h3>Tvoja Igrivost</h3>
                        <span class="date-label">Vsak dan</span>
                        <p>Obo≈æujem tvoj smisel za humor in kako zna≈° vsak trenutek spremeniti v zabavo. S tabo je ≈æivljenje ena sama velika pustolov≈°ƒçina. Moja kraljica. üëë</p>
                    </div>
                </div>
                <div class="timeline-item left">
                    <div class="content-box">
                        <img src="photo2.JPG" alt="Tvoja milina" style="width:100%; border-radius: 10px; margin-bottom: 15px; border: 1px solid #eee;">
                        <h3>Tvoja Ne≈ænost</h3>
                        <span class="date-label">Danes in za vedno</span>
                        <p>V tvojem objemu najdem svoj mir. Tvoja milina in toplina sta moj dom, ne glede na to, kje sva.</p>
                    </div>
                </div>
            </div>

             <h2 class="section-title">Ujeti Trenutki</h2>
             <div class="gallery-container" id="gallery">
                 <div class="polaroid active">
                     <img src="photo1.JPG" alt="Spomin 1">
                     <div class="caption">Najin Dunaj ‚ú®</div>
                 </div>
                 <div class="polaroid right">
                     <img src="photo3.JPG" alt="Spomin 2">
                     <div class="caption">Moja Burger Queen üçî</div>
                 </div>
                 <div class="polaroid left">
                     <img src="photo2.JPG" alt="Spomin 3">
                     <div class="caption">Sne≈æena kraljica ‚ù§Ô∏è</div>
                 </div>
             </div>
             <p class="gallery-hint">Klikni na sliko, da jo prelo≈æi≈° üëÜ</p>

            <div class="love-note-container">
                <h2 class="note-title">Zakaj Te Imam Rad</h2>
                <div class="note-text">
                    <p>Gaja, tvoj pogled kot plamen v meni gori,</p>
                    <p>v njem sreƒço najdem, ki nikdar ne zbledi.</p>
                    <p>Tvoj nasmeh kot sonce razsvetli najlep≈°i cvet,</p>
                    <p>brez tebe ≈æivljenje je tih, prazen svet.</p>
                    <br>
                    <p>Tvoj dotik me vodi kot ne≈æna melodija,</p>
                    <p>v njem ple≈°e najina veƒçna harmonija.</p>
                    <p>Gaja, ti si pesem, ki nikdar ne utihne,</p>
                    <p>ljubezen v mojem srcu zate vedno utripne.</p>    
                </div>
            </div>

            <div class="heart-section">
                <div class="big-heart" id="tapHeart">üíñ</div>
                <div class="heart-count-box">
                    Tvojih dotikov ljubezni: <span id="tapCounter" style="font-weight:bold; color:var(--primary);">0</span>
                </div>
                <p style="font-size: 0.9em; opacity: 0.7; margin-top: 10px;">Tapkaj srce za eksplozijo ljubezni! üí•</p>
            </div>

            <footer>
                <p>Narejeno z neskonƒçno ljubeznijo, samo zate Gaja üíï<br>Za vedno tvoj.</p>
            </footer>
        </div>
    </div>

    <div class="music-control" id="musicToggle">
        üéµ
    </div>

    <audio id="bgMusic" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mp3">
        Va≈° brskalnik ne podpira avdio elementa.
    </audio>

    <script>
        // --- KONFIGURACIJA DATUMA ---
        const startDate = new Date(2024, 1, 17); 
        
        // --- SPREMENLJIVKE ZA DOM ELEMENTE ---
        const envelopeBtn = document.getElementById('envelopeBtn');
        const introOverlay = document.getElementById('intro-overlay');
        const mainContent = document.getElementById('mainContent');
        const bgMusic = document.getElementById('bgMusic');
        const musicToggle = document.getElementById('musicToggle');
        
        let isMusicPlaying = false;

        // --- 1. ODPIRANJE OVOJNICE (POƒåASNEJ≈†E IN POPRAVLJENO) ---
        envelopeBtn.addEventListener('click', () => {
            envelopeBtn.classList.add('open');
            document.querySelector('.tap-hint').style.opacity = '0';
            
            bgMusic.volume = 0.4; 
            bgMusic.play().then(() => {
                isMusicPlaying = true;
                musicToggle.innerHTML = '‚è∏'; 
            }).catch(e => console.log("Samodejno predvajanje ni uspelo, uporabnik mora klikniti gumb za glasbo."));

            // Poƒçakamo na animacijo (2000ms je dovolj za sinhronizacijo)
            setTimeout(() => {
                introOverlay.style.opacity = '0';
                introOverlay.style.visibility = 'hidden';
                mainContent.style.display = 'block';
                
                setTimeout(() => {
                    mainContent.style.opacity = '1';
                    initTimelineObserver(); 
                }, 100);
            }, 6000); 
        });

        // --- 2. NADZOR GLASBE ---
        musicToggle.addEventListener('click', () => {
            if (isMusicPlaying) {
                bgMusic.pause();
                musicToggle.innerHTML = 'üéµ'; 
            } else {
                bgMusic.play();
                musicToggle.innerHTML = '‚è∏'; 
            }
            isMusicPlaying = !isMusicPlaying;
        });

        // --- 3. LOGIKA ≈†TEVCA ZVEZE ---
        function updateTimer() {
            const now = new Date();
            const diff = now - startDate; 

            const daysTotal = Math.floor(diff / (1000 * 60 * 60 * 24));
            const years = Math.floor(daysTotal / 365);
            const days = daysTotal % 365;
            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const minutes = Math.floor((diff / (1000 * 60)) % 60);
            const seconds = Math.floor((diff / 1000) % 60);

            document.getElementById('years').innerText = years;
            document.getElementById('days').innerText = days;
            document.getElementById('hours').innerText = hours;
            document.getElementById('minutes').innerText = minutes;
            document.getElementById('seconds').innerText = seconds;
        }
        updateTimer();
        setInterval(updateTimer, 1000);

        // --- 4. LOGIKA POLAROID GALERIJE ---
        const cards = document.querySelectorAll('.polaroid');
        let currentIndex = 0;

        function updateCards() {
            cards.forEach((card, index) => {
                card.classList.remove('active', 'left', 'right');
                
                let position = (index - currentIndex + cards.length) % cards.length;

                if (position === 0) {
                    card.classList.add('active'); 
                } else if (position === 1) {
                    card.classList.add('right'); 
                } else {
                    card.classList.add('left'); 
                }
            });
        }

        cards.forEach(card => {
            card.addEventListener('click', () => {
                currentIndex = (currentIndex + 1) % cards.length;
                updateCards();
            });
        });
        updateCards();

        // --- 5. ANIMACIJA ƒåASOVNICE (Scroll) ---
        function initTimelineObserver() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.2 }); 

            document.querySelectorAll('.timeline-item').forEach(item => {
                observer.observe(item);
            });
        }

        // --- 6. INTERAKTIVNO SRCE (Eksplozija) ---
        const tapHeart = document.getElementById('tapHeart');
        const tapCounterDisplay = document.getElementById('tapCounter');
        let taps = 0;

        tapHeart.addEventListener('pointerdown', (e) => {
            e.preventDefault(); 
            taps++;
            tapCounterDisplay.innerText = taps;

            const rect = tapHeart.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            for(let i = 0; i < 10; i++) {
                createMiniHeart(centerX, centerY);
            }
        });

        function createMiniHeart(x, y) {
            const heart = document.createElement('div');
            heart.innerHTML = '‚ù§';
            heart.className = 'mini-heart';
            const size = Math.random() * 20 + 15;
            heart.style.fontSize = size + 'px';
            
            heart.style.left = (x - size/2) + 'px';
            heart.style.top = (y - size/2) + 'px';
            
            document.body.appendChild(heart);

            const angle = Math.random() * Math.PI * 2; 
            const velocity = Math.random() * 150 + 80; 
            const moveX = Math.cos(angle) * velocity;
            const moveY = Math.sin(angle) * velocity - 100; 

            setTimeout(() => {
                 heart.style.transform = `translate(${moveX}px, ${moveY}px) rotate(${Math.random()*360}deg) scale(0)`;
                 heart.style.opacity = '0';
            }, 10);

            setTimeout(() => heart.remove(), 1000);
        }

        // --- 7. ANIMIRANO OZADJE (Delci/Srƒçki) ---
        const canvas = document.getElementById('particles');
        const ctx = canvas.getContext('2d');
        let particlesArray = [];

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = canvas.height + Math.random() * 100; 
                this.size = Math.random() * 15 + 8; 
                this.speedY = Math.random() * 1 + 0.5; 
                this.opacity = Math.random() * 0.4 + 0.1; 
                this.type = Math.random() > 0.7 ? '‚ù§' : '‚Ä¢';
            }
            update() {
                this.y -= this.speedY; 
                if (this.y < -50) {
                    this.y = canvas.height + 50;
                    this.x = Math.random() * canvas.width;
                    this.opacity = Math.random() * 0.4 + 0.1;
                }
            }
            draw() {
                ctx.fillStyle = `rgba(255, 182, 193, ${this.opacity})`;
                ctx.font = this.size + 'px Arial';
                ctx.fillText(this.type, this.x, this.y);
            }
        }

        function initParticles() {
            particlesArray = [];
            for (let i = 0; i < 40; i++) { 
                particlesArray.push(new Particle());
            }
        }
        initParticles();

        function animateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height); 
            for (let i = 0; i < particlesArray.length; i++) {
                particlesArray[i].update();
                particlesArray[i].draw();
            }
            requestAnimationFrame(animateParticles);
        }
        animateParticles();
    </script>
</body>
</html>